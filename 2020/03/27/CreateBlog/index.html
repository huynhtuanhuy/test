<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content>
    <meta name="keyword" content>
    <link rel="shortcut icon" href="/test/img/ironman-draw.png">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <title>
        
          Post#2 How to create a blog using M.E.R.N Stack - NhatQuang
        
    </title>

    <link rel="canonical" href="huynhtuanhuy.github.io/test/2020/03/27/CreateBlog/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/test/css/bootstrap.min.css">

    <!-- Custom CSS --> 
    <link rel="stylesheet" href="/test/css/beantech.min.css">
    
    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/test/css/highlight.css">

    <link rel="stylesheet" href="/test/css/widget.css">

    <link rel="stylesheet" href="/test/css/rocket.css">

    <link rel="stylesheet" href="/test/css/signature.css">

    <link rel="stylesheet" href="/test/css/toc.css">

    <!-- Custom Fonts -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<body ontouchstart="">
	<!-- Created by Nguyen Nhat Quang -->
<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        
            background-image: url('mernpic.jpg')
            /*post*/
        
    }
    
    #signature{
        background-image: url('/test/undefined');
    }
    
</style>

<header class="intro-header" >
    <!-- Signature -->
    <div id="signature">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
                    <div class="post-heading">
                        <div class="tags">
                            
                        </div>
                        <h1>Post#2 How to create a blog using M.E.R.N Stack</h1>
                        <h2 class="subheading">25 min read</h2>
                        <span class="meta">
                            Posted by Nhat Quang on
                            2020-03-27
                        </span>
                    </div>
                
                </div>
            </div>
        </div>
    </div>
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/test/">Tech Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/test/">Home</a>
                    </li>

                    

                        
                    

                        
                        <li>
                            <a href="/test/about/">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/test/archive/">Archives</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/test/tags/">Tags</a>
                        </li>
                        
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    
<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <h2><span id="this-is-going-to-be-the-first-technical-blog-that-i-write-and-it-is-going-to-be-super-long-but-very-helpful-stay-tuned">This is going to be the first technical blog that I write and it is going to be super long but very helpful. Stay tuned !!</span></h2>
<h3><span id="what-is-mern">What is M.E.R.N ?</span></h3>
<p>This is a <strong>“stack”</strong>(combination) of different languages and technologies used to create a software or program. It is in short for MongoDB, Express, React, and Nodejs (Don’t worry about these things yet I will explain them in just a moment)</p>
<p>The <strong>M.E.R.N</strong> stack uses</p>
<ul>
<li><strong>MongoDB</strong> as our database, storing information</li>
<li><strong>Express and NodeJS</strong> to build the server (backend) to our website</li>
<li><strong>React</strong> as our client-side (frontend)</li>
</ul>
<h3><span id="what-do-we-need-in-a-blog">What do we need in a blog ?</span></h3>
<p>I believe there are <strong>3 step</strong> important steps of creating a blog (I am just a beginner so dont judge me if I miss any parts)</p>
<ol>
<li>A CRUD (Create, Read, Update, Delete) function for your posts</li>
<li>Craft and store your posts in a store</li>
<li>Launch and maintain your blog !!</li>
</ol>
<h2><span id="lets-get-to-creating-our-app">Let’s get to creating our app !!</span></h2>
<h3><span id="1-create-a-react-application">1. Create a React application</span></h3>
<p>Assume that you already have a editor (I prefer to use <strong>Visual Studio Code</strong>). Create a new folder to contain your app.</p>
<p>You will need to install <a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">NodeJs</a> beforehand</p>
<p>There is an alternative for running the React App instead of npm (Nodejs Package Manager) which is <a href="https://www.npmjs.com/package/yarn" target="_blank" rel="noopener">Yarn</a> and I also prefer to use this.</p>
<p>So I will create a new React App</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn add create react-app (your app name)</span><br><span class="line"><span class="built_in">cd</span> (your app name)</span><br><span class="line">yarn start</span><br></pre></td></tr></table></figure>
<h3><span id="2-install-necessary-dependencies">2. Install necessary dependencies</span></h3>
<p>Dependencies are similar to library that can add additional features to your app and here we are going to install the following dependencies: <strong>react-router, react router-dom</strong></p>
<p>In order to use react-router and react-router-dom, you need to import and inject a <strong>BrowserRouter</strong> in the <strong>index.js</strong> file such as below</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; BrowserRouter &#125; <span class="keyword">from</span> <span class="string">"react-router-dom"</span>;</span><br><span class="line">ReactDOM.render(&lt;BrowserRouter&gt;&lt;Provider store=&#123;store&#125;&gt;&lt;App /&gt;&lt;/Provider&gt;&lt;/BrowserRouter&gt;, <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>));</span><br></pre></td></tr></table></figure>
<h2><span id="now-we-start-crafting-our-react-application">Now we start crafting our React application</span></h2>
<h3><span id="creating-forms-for-crud-add-function">Creating forms for CRUD (Add function)</span></h3>
<p>Handling Forms is probably the most important step in the frontend side. Here I will create 2 components which is <strong>AddPost</strong> to handle adding new posts and <strong>PostList</strong> to render all the posts we have. You should structure the folders so that you have a component folder to store all your components.</p>
<img src="/test/2020/03/27/CreateBlog/folderStructure.PNG">
<p>Below is the setup for my <strong>AddPost</strong> component. Here we will pass an <strong>addPost</strong> as a <strong>props</strong> which later we will pass the actual function to add new post from the main App component. This component will return a form that includes 3 inputs for 3 main values of a post which are <strong><em>title, headline and content</em></strong>.</p>
<p>I also use the standard form handling which is setting a <strong>postInfo</strong> state that carries the attributes of the new post which are <strong><em>title, headline and content</em></strong>. Whenever an input is changing (when the user is entering information) the postInfo will receive that value and update the state.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> AddPost = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;addPost&#125; = props</span><br><span class="line">  <span class="comment">// const id = useSelector((state) =&gt; state.ListPosts.length + 1)</span></span><br><span class="line">  <span class="keyword">const</span> dispatch = useDispatch()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [postInfo, setPostInfo] = useState(&#123;</span><br><span class="line">    <span class="comment">// id: id,</span></span><br><span class="line">    title: <span class="string">""</span>,</span><br><span class="line">    headline: <span class="string">""</span>,</span><br><span class="line">    content: <span class="string">""</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">const</span> onSubmitHandler = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    e.preventDefault()</span><br><span class="line">    addPost(postInfo) </span><br><span class="line">    setPostInfo(&#123;</span><br><span class="line">      title:<span class="string">""</span>,</span><br><span class="line">      headline:<span class="string">""</span>,</span><br><span class="line">      content:<span class="string">""</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;form onSubmit=&#123;onSubmitHandler&#125;&gt;</span><br><span class="line">        &lt;input</span><br><span class="line">          type=<span class="string">"text"</span></span><br><span class="line">          name=<span class="string">"title"</span></span><br><span class="line">          placeholder=<span class="string">"Enter title"</span></span><br><span class="line">          value=&#123;postInfo.title&#125;</span><br><span class="line">          onChange=&#123;(e) =&gt; &#123; setPostInfo(&#123; ...postInfo, <span class="attr">title</span>: e.target.value &#125;) &#125;&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">       &lt;input</span><br><span class="line">          type=<span class="string">"text"</span></span><br><span class="line">          name=<span class="string">"headline"</span></span><br><span class="line">          placeholder=<span class="string">"Enter headline"</span></span><br><span class="line">          value=&#123;postInfo.headline&#125;</span><br><span class="line">          onChange=&#123;(e) =&gt; &#123; setPostInfo(&#123; ...postInfo, <span class="attr">headline</span>: e.target.value &#125;) &#125;&#125;</span><br><span class="line">        /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;input</span><br><span class="line">          type=<span class="string">"text"</span></span><br><span class="line">          name=<span class="string">"content"</span></span><br><span class="line">          placeholder=<span class="string">"Enter content"</span></span><br><span class="line">          value=&#123;postInfo.content&#125;</span><br><span class="line">          onChange=&#123;(e) =&gt; &#123; setPostInfo(&#123; ...postInfo, <span class="attr">content</span>: e.target.value &#125;) &#125;&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">        &lt;input type=<span class="string">"submit"</span> value=<span class="string">"Submit"</span>/&gt;</span><br><span class="line"></span><br><span class="line">      &lt;<span class="regexp">/form&gt;</span></span><br></pre></td></tr></table></figure>
<p>So after the postInfo state receive all the updated information and we submit the form, it will triggered the function <strong>addPost</strong> with the information in <strong>postInfo</strong></p>
<p>Therefore, outside the App.js file, we will return the <strong>AddPost</strong> component within the <strong>PostList</strong> component, receiving function <strong>addPost</strong> as props</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> PostLists = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> addPost = <span class="function">(<span class="params">postInfo</span>) =&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> newPost = postInfo</span><br><span class="line">    dispatch(actionCreators.addPostToServer(newPost))</span><br><span class="line">  &#125;</span><br><span class="line">   <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;AddPost addPost=&#123;addPost&#125;/&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>So what is the <strong>dispatch</strong> in the image above. I will explain it in the.</p>
<h3><span id="3-setting-up-the-redux-store">3. Setting up the Redux Store</span></h3>
<p>Since state management is quite tiring between the components, I decided to use Redux and some advanced Redux including asynchronous functions (You can check out how to use it in this post of mind [ReduxPost]). <strong><em>Therefore, I decided to keep all my posts as a ListPosts state in the Redux store</em></strong></p>
<p>Traditionally, in the class based components, we usually have to set up complex things such as <strong>mapStateToProps, mapDispatchToProps, connect</strong>, … to make redux work. However, React Hooks give us equivalent but handier way to handle redux. We will apply useSelector (mapStateToProps equivalent) and useDispatch (mapDispatchToProps).</p>
<h4><span id="1-setting-in-the-indexjs-file">1. Setting in the index.js file</span></h4>
<p>This is quite a lot of work so I wouldnt come into too much details in the post. First, we will need to install <strong>react-redux and redux</strong> dependencies. After that, we import <strong>createStore and Provider</strong> from react-redux. I recommend using an extra middleware (in my case, it is the <strong><em>logger</em></strong> function) (a function runs just before a <strong>state</strong> is changed) to monitor the state as we goes along. Below is my complete setup for the index.js file without the imports</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> composeEnhancers = <span class="built_in">window</span>.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> logger = <span class="function">(<span class="params">store</span>) =&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="params">next</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"[Middleware] Dispatching"</span>,action)</span><br><span class="line">      <span class="keyword">const</span> result = next(action)</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"[Middleware] next state"</span>, store.getState())</span><br><span class="line">      <span class="keyword">return</span> result</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; </span><br><span class="line">&#125; <span class="comment">//middleware</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(reducer, composeEnhancers(applyMiddleware(logger, thunk)))</span><br><span class="line"></span><br><span class="line">ReactDOM.render(&lt;BrowserRouter&gt;&lt;Provider store=&#123;store&#125;&gt;&lt;App /&gt;&lt;/Provider&gt;&lt;/BrowserRouter&gt;, <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>));</span><br></pre></td></tr></table></figure>
<p>You can see that we wrap our App with 2 things the <strong>Provider</strong> with the store (for the redux store) and the <strong>BrowserRouter</strong> for the route usage in our app</p>
<p>In our store, you add a middleware <strong>logger</strong> and a <strong>thunk</strong> (from redux thunk) in order to enable use using <strong>asynchronous</strong> code from the action folder of the Redux store later</p>
<h4><span id="2-setting-in-the-action-folder">2. Setting in the action folder</span></h4>
<p>The action folders hold all the actions of a redux store (it is not recommended that you perform logic here). So we will define all of out actions in the action file such as create, read, update and delete</p>
<p>Here is an example that I set up the create function in the action folder.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ADD_POST = <span class="string">"ADD_POST"</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> addPost = <span class="function">(<span class="params">newPost</span>) =&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type:ADD_POST,</span><br><span class="line">    newPost:newPost</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> addPostToServer = <span class="function">(<span class="params">newPost</span>) =&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</span><br><span class="line">    Axios.post(<span class="string">"http://localhost:5000/posts/add"</span>,newPost)</span><br><span class="line">      .then(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"add to database success"</span>)</span><br><span class="line">        dispatch(addPost(newPost))</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function">(<span class="params">err</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The upper function addPost is used to add a new post to both the <strong>ListPosts</strong> state in the store and to the database in the server (which I will mention later)</p>
<p>Usually we would only defined the actions the in the action folder. However, I am using a very cool <strong>dispatch</strong> technique that allows me to perform asynchronous functions in the action folder. What I am doing here is that I am using Axios to call api to my server (which I will show you how to set up later) and update the database of my newest post.</p>
<h4><span id="3-setting-the-reducer">3. Setting the reducer</span></h4>
<p>This is propably the most <strong>important</strong> part of our Redux store. After receiving the action’s definition and payload (additional information that comes with the action), it will perform all the actual function here in the reducer (No asynchronous functions here)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initialState = &#123;</span><br><span class="line">  ListPosts:[],</span><br><span class="line">  SearchList:[],</span><br><span class="line">  MailList:[]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> reducer = <span class="function">(<span class="params">state = initialState, action</span>) =&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> actionTypes.ADD_POST:</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          ...state,</span><br><span class="line">          ListPosts:state.ListPosts.concat(action.newPost)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Inside the reducer, as I have mentioned before, I set a global state <strong>ListPosts</strong> to store all the posts that would be rendered to the screen.</p>
<p>Every time the action <strong><em>add new Post</em></strong> is dispatched, it will execute the asynchronous functions in the action, updating the database and then it will go through the reducer, performing the action of adding a new post to the global state <strong>ListPosts</strong>. So here we update both the ListPosts state and the database. The image below should help you out a bit with this action flow :))</p>
<img src="/test/2020/03/27/CreateBlog/actionFlow.PNG">
<p>There, we are pretty much done with the <strong>Add new post</strong> function in the client-side.</p>
<h3><span id="creating-a-server-for-the-website-using-nodejs-and-express">Creating a server for the website using Nodejs and Express</span></h3>
<p>I will create another folder called backend in my project and a file <strong>server.js</strong> inside that folder. This file will hold all of my server for the website. The settings are right below:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>)</span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">"body-parser"</span>)</span><br><span class="line"><span class="keyword">const</span> cors = <span class="built_in">require</span>(<span class="string">"cors"</span>)</span><br><span class="line"></span><br><span class="line">app.use(cors());</span><br><span class="line">app.use(bodyParser.urlencoded(&#123;<span class="attr">extended</span>: <span class="literal">true</span>&#125;));</span><br><span class="line">app.use(bodyParser.json());</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">5000</span>,(err)=&gt;&#123;</span><br><span class="line">  <span class="keyword">if</span>(err)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"server start success"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>With all of the settings, our server is up and loaded at <strong>port 5000</strong> of our localhost. Which means that in a way or another, even though your website is not hosted yet, you are not running your app in your computer but on the <strong>internet</strong> now. Cool right !</p>
<p>I will start the server using the code below</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node server.js</span><br></pre></td></tr></table></figure>
<p>Our server is completed and now we are going to set up our <strong>MongoDB</strong> database and connect it to our server.</p>
<h3><span id="setting-up-the-database-using-mongodb-compass">Setting up the database using MongoDB Compass</span></h3>
<p>You will have to install the latest stable version of <a href="https://robomongo.org/download" target="_blank" rel="noopener">Robo3T</a> and <a href="https://www.mongodb.com/products/compass" target="_blank" rel="noopener">MongoDB Compass</a> in order to setup the database. Once you have installed and set everything up, your database should look like this:</p>
<img src="/test/2020/03/27/CreateBlog/mongodb.PNG">
<p>Typically, your <strong>connection</strong> will be localhost:27017 so you will be able to create a new database inside the connection. I create my own database and named it <strong>“ListPostsBlog”</strong>. Inside the database, there will be different collections and each <strong>collections</strong> should serve its own purpose. For example, I will have a collection ListPostsForBlog where I will store all my posts as <strong>documents</strong> like below</p>
<img src="/test/2020/03/27/CreateBlog/mongoexample.PNG">
<p>If you get here, it means that you have successfully set up the database and it is ready to use.</p>
<h3><span id="connecting-the-database-to-the-server">Connecting the database to the server</span></h3>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  res.header(<span class="string">"Access-Control-Allow-Origin"</span>, <span class="string">"http://localhost:3000"</span>); <span class="comment">// update to match the domain you will make the request from</span></span><br><span class="line">  res.header(<span class="string">"Access-Control-Allow-Headers"</span>, <span class="string">"Origin, X-Requested-With, Content-Type, Accept"</span>);</span><br><span class="line">  res.header(<span class="string">"Access-Control-Allow-Methods"</span>, <span class="string">"GET, POST, OPTIONS, PUT, DELETE"</span>);</span><br><span class="line">  next();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">mongoose.connect(</span><br><span class="line">  <span class="string">'mongodb://localhost/ListPostsBlog'</span>,</span><br><span class="line">  &#123;</span><br><span class="line">      useNewUrlParser: <span class="literal">true</span>,</span><br><span class="line">      useUnifiedTopology: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  (err) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) <span class="built_in">console</span>.log(err)</span><br><span class="line">      <span class="keyword">else</span> <span class="built_in">console</span>.log(<span class="string">"DB connect success!"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>We use the <strong>app.use</strong> function to connect the <strong>backend</strong> side (which run at localhost:5000) to our <strong>client</strong> side (which run at localhost:3000). Then we use mongoose, a updated library developed from mongodb to connect to our database. Notice that the link <strong>‘mongodb://localhost/ListPostsBlog’</strong> must be precised in terms of connection and database name. (my database name is ListPostsBlog)</p>
<h3><span id="structuring-mongodb">Structuring MongoDB</span></h3>
<p>Since MongoDB is a database, it allows us to structure the data inside and assign them <strong>types</strong> and other attributes<br>
similar to Microsoft Access that I learnt in grade 12 (something I see as really valuable) but MongoDB is <strong>NoSQL</strong> type database.</p>
<p>Below I construct my database for 3 main components of a blog using Schema (supported by Mongoose): title, headline and content (I assume…). This should be put in your model folder in your backend folder.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> PostSchema = <span class="keyword">new</span> Schema(&#123;</span><br><span class="line">  title:&#123;</span><br><span class="line">    type:<span class="built_in">String</span>,</span><br><span class="line">    required: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  headline:&#123;</span><br><span class="line">    type:<span class="built_in">String</span>,</span><br><span class="line">    required:<span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  content:&#123;</span><br><span class="line">    type:<span class="built_in">String</span>,</span><br><span class="line">    required:<span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = mongoose.model(<span class="string">"Post"</span>, PostSchema)</span><br></pre></td></tr></table></figure>
<p>This file will export a PostSchema (Post Attributes you can say) for each Post that I create. Thus, we can import this <strong>PostSchema</strong> to other files we are about to use.</p>
<h3><span id="setting-up-more-routers-to-call-api">Setting up more routers to call API</span></h3>
<p>What is API ?</p>
<p>API is in short for Application Programming Interface, which is a standard <strong>protocol</strong> that developers use to transfer information. Lets say if you are doing actions in a website, the server wont get all the <strong>“raw data”</strong> that you are changing but different APIs of get, post, put, delete, … and then process the APIs and send you back responses(More can be found <a href="https://topdev.vn/blog/api-la-gi/" target="_blank" rel="noopener">Here</a>)</p>
<p>Since in our client-side React-app such as the <strong>add new post</strong> function above, we use Axios to call and post new data to our server.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Axios.post(<span class="string">"http://localhost:5000/posts/add"</span>,newPost)</span><br><span class="line">      .then(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"add to database success"</span>)</span><br><span class="line">        dispatch(addPost(newPost))</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function">(<span class="params">err</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">      &#125;)</span><br></pre></td></tr></table></figure>
<p>Therefore, right now in the server, we have to write routers to catch and process those APIs. So we will write a new router for rendering all the posts (get function) and creating new post</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">PostRouter.get(<span class="string">"/"</span>,(req,res)=&gt;&#123;</span><br><span class="line">  ListPosts.find(<span class="function">(<span class="params">err, posts</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err)&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">      res.json(posts)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">PostRouter.post(<span class="string">"/add"</span>,(req,res)=&gt;&#123;</span><br><span class="line">  <span class="keyword">const</span> post = <span class="keyword">new</span> ListPosts(req.body) </span><br><span class="line">  post.save()</span><br><span class="line">    .then(<span class="function">(<span class="params">post</span>) =&gt;</span> &#123;</span><br><span class="line">      res.status(<span class="number">200</span>).json(&#123;<span class="string">"post"</span>:<span class="string">"Post added successfully"</span> &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function">(<span class="params">err</span>)=&gt;</span>&#123;</span><br><span class="line">      res.status(<span class="number">400</span>).send(<span class="string">"unable to save to database"</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Here the <strong>ListPosts</strong> is extracted from the <strong>database</strong>.</p>
<ul>
<li>GET: the get-router is pretty simple, we will find in the database and render out all the data</li>
<li>POST: the post-router always come with the information of the new post (remember when we <strong>dispatch</strong> addnewPost action, we send the newest postInfo as additional information). So we will get that information using <strong>req.body</strong> (body of the our request), create a new Post using the type in the PostSchema and upload it to the database.</li>
</ul>
<p>So we are done with the Post function (sounds really complex despite the simple click we do on websites everyday right :)) )</p>
<h3><span id="render-our-listposts-read-function">Render our ListPosts (Read function)</span></h3>
<p>Here, we will render out all the posts in our global state ListPosts in the redux store. I will use the React Hook useEffect as a cleanup function, which is whenever the ListPosts state is changed, we will get the latest data from the database and pass it down to the ListPosts state.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> listPost = useSelector(<span class="function">(<span class="params">state</span>) =&gt;</span> state.ListPosts)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fetchData = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> fetch(<span class="string">"http://localhost:5000/posts"</span>)</span><br><span class="line">  <span class="keyword">const</span> resJson = <span class="keyword">await</span> response.json()</span><br><span class="line">  <span class="keyword">return</span> resJson</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> listPost = useSelector(<span class="function">(<span class="params">state</span>) =&gt;</span> state.ListPosts)</span><br><span class="line"><span class="keyword">const</span> [invalidate, setInvalidate] = useState(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">const</span> dispatch = useDispatch()</span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (invalidate) &#123;</span><br><span class="line">      fetchData()</span><br><span class="line">        .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">          dispatch(actionCreators.updateListPost(res))</span><br><span class="line">          <span class="comment">// setListPost(res)</span></span><br><span class="line">          setInvalidate(<span class="literal">false</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(err)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, [invalidate]);</span><br></pre></td></tr></table></figure>
<p>Since the <strong>useEffect</strong> hook will run whenever the value in the array is changed (here is invalidate changes), it will automatically <strong>dispatch</strong> to the action updateListPost in the action and get the newest data from the database</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">listPost.map(<span class="function">(<span class="params">post, index</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">          &lt;Link to=&#123;<span class="string">`/posts/<span class="subst">$&#123;post._id&#125;</span>`</span>&#125;&gt;</span><br><span class="line">            &lt;Post</span><br><span class="line">              key=&#123;index + <span class="number">1</span>&#125;</span><br><span class="line">              title=&#123;post.title&#125;</span><br><span class="line">              headline=&#123;post.headline&#125;</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;<span class="regexp">/Link&gt;</span></span><br><span class="line"><span class="regexp">          &lt;button onClick=&#123;() =&gt; deletePost(post, post._id)&#125;&gt;Remove&lt;/</span>button&gt;</span><br><span class="line">          &lt;UpdatePost index=&#123;index&#125; post=&#123;post&#125;/&gt;            &#123;<span class="comment">/*UPDATE POST*/</span>&#125; </span><br><span class="line">          &lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>
<p>From there, we can easily render all the posts in the <strong>ListPosts state</strong> out to the screen easily using the map function. As you noticed, every time we <strong>render</strong> a post, we also add a <strong>delete button</strong> and a <strong>Update Component</strong> so that we can perform our delete and update functions.</p>
<h3><span id="delete-function">Delete Function</span></h3>
<p>All delete function always go with the <strong>id</strong> of the post we are deleting. So when we click the button “DeletePost above”, we will dispatch the action below.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> deletePost = <span class="function">(<span class="params">post, _id</span>) =&gt;</span> &#123;</span><br><span class="line">  dispatch(actionCreators.deletePostFromServer(post, _id))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">listPost.map(<span class="function">(<span class="params">post, index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">        &lt;Link to=&#123;<span class="string">`/posts/<span class="subst">$&#123;post._id&#125;</span>`</span>&#125;&gt;</span><br><span class="line">          &lt;Post</span><br><span class="line">            key=&#123;index + <span class="number">1</span>&#125;</span><br><span class="line">            title=&#123;post.title&#125;</span><br><span class="line">            headline=&#123;post.headline&#125;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;<span class="regexp">/Link&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button onClick=&#123;() =&gt; deletePost(post, post._id)&#125;&gt;Remove&lt;/</span>button&gt;</span><br><span class="line">       &lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>
<p>Again we are reaching to our Redux store, search for the action “DELETE_POST”, <strong>delete</strong> the post from the database in our server and then go to our Reducer and <strong>update</strong> the new state for the ListPosts, just as we do with the add new Post function</p>
<p>Here is my action folder:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> deletePost = <span class="function">(<span class="params">post, _id</span>) =&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type:DELETE_POST,</span><br><span class="line">    post:post,</span><br><span class="line">    _id:_id</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> deletePostFromServer = <span class="function">(<span class="params">post, _id</span>) =&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">dispatch</span>) =&gt;</span>&#123;</span><br><span class="line">    Axios.delete(<span class="string">`http://localhost:5000/posts/delete/<span class="subst">$&#123;post._id&#125;</span>`</span>)</span><br><span class="line">      .then(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">        dispatch(deletePost(post, _id))</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function">(<span class="params">err</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>As you notice, we still use Axios to call API to our server and pass down the 2 things in the delete function the actual <strong>post</strong> (so that later in the reducer we can use it to get the id of the <strong>post</strong> in the reducer) and the <strong>_id</strong> which is the id the Mongodb database automatically <strong>generate</strong> for us.</p>
<p>Now we have successfully delete it in the database, we will update the <strong>state</strong> of ListPosts inside the redux store in the reducer file.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> actionTypes.DELETE_POST:</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">const</span> newListPost = state.ListPosts.filter(<span class="function">(<span class="params">post</span>)=&gt;</span> post._id != action._id)</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">      ...state,</span><br><span class="line">      ListPosts: newListPost</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>We use the filter method and comparing the <strong>action</strong> (that will just passed down) id with the id from all the posts and remove the right post.</p>
<h3><span id="update-function">Update Function</span></h3>
<p>This is the last main <strong>function</strong> of our app and to be honest it is a bit similar to how we do with the create function. We begin by creating an UpdatePost component</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> UpdatePost = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; post, index &#125; = props</span><br><span class="line">  <span class="keyword">const</span> dispatch = useDispatch()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [postInfo, setPostInfo] = useState(&#123;</span><br><span class="line">    title: <span class="string">""</span>,</span><br><span class="line">    headline: <span class="string">""</span>,</span><br><span class="line">    content: <span class="string">""</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> onSubmitHandler = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    e.preventDefault()</span><br><span class="line">    <span class="keyword">const</span> newPost = &#123;</span><br><span class="line">      _id: post._id,</span><br><span class="line">      title: postInfo.title,</span><br><span class="line">      headline: postInfo.headline,</span><br><span class="line">      content: postInfo.content</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Axios.post(<span class="string">`http://localhost:5000/posts/update/<span class="subst">$&#123;newPost._id&#125;</span>`</span>, postInfo)</span><br><span class="line">      .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res)</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">      &#125;)</span><br><span class="line">    <span class="comment">// dispatch(actionCreators.updatePostServer(newPost, index))</span></span><br><span class="line">    setPostInfo(&#123;</span><br><span class="line">      title: <span class="string">""</span>,</span><br><span class="line">      headline: <span class="string">""</span>,</span><br><span class="line">      content: <span class="string">""</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;form onSubmit=&#123;onSubmitHandler&#125;&gt;</span><br><span class="line">        &lt;input</span><br><span class="line">          type=<span class="string">"text"</span></span><br><span class="line">          name=<span class="string">"title"</span></span><br><span class="line">          placeholder=<span class="string">"Enter title"</span></span><br><span class="line">          value=&#123;postInfo.title&#125;</span><br><span class="line">          onChange=&#123;(e) =&gt; &#123; setPostInfo(&#123; ...postInfo, <span class="attr">title</span>: e.target.value &#125;) &#125;&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">       &lt;input</span><br><span class="line">          type=<span class="string">"text"</span></span><br><span class="line">          name=<span class="string">"headline"</span></span><br><span class="line">          placeholder=<span class="string">"Enter headline"</span></span><br><span class="line">          value=&#123;postInfo.headline&#125;</span><br><span class="line">          onChange=&#123;(e) =&gt; &#123; setPostInfo(&#123; ...postInfo, <span class="attr">headline</span>: e.target.value &#125;) &#125;&#125;</span><br><span class="line">        /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;input</span><br><span class="line">          type=<span class="string">"text"</span></span><br><span class="line">          name=<span class="string">"content"</span></span><br><span class="line">          placeholder=<span class="string">"Enter content"</span></span><br><span class="line">          value=&#123;postInfo.content&#125;</span><br><span class="line">          onChange=&#123;(e) =&gt; &#123; setPostInfo(&#123; ...postInfo, <span class="attr">content</span>: e.target.value &#125;) &#125;&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">        &lt;input type=<span class="string">"submit"</span> value=<span class="string">"UpdatePost"</span> /&gt;</span><br><span class="line"></span><br><span class="line">      &lt;<span class="regexp">/form&gt;</span></span><br></pre></td></tr></table></figure>
<p>You can see it is nearly identical to our add new <strong>post</strong> function. First we need to create 3 forms to handle the change of 3 main attributes of our post <strong>title, headline, and content</strong>.</p>
<p>We will also set a <strong>postInfo</strong> state to contain the updated information in each post and whenever the input is changing (the user is entering new information), this state will be updated. Then we will store the <strong>postInfo</strong> information along with the <strong>_id</strong> from the <strong>post</strong> that we pass a props for the UpdatePost component in an object <strong>newPost</strong></p>
<p>Finally, we use Axios to call to our API to post a new post to the exact id of the old post and we have updated it successfully.</p>
<h3><span id="additional-functions">Additional Functions</span></h3>
<h4><span id="search-form">Search Form</span></h4>
<p>This is also a function that is used a lot when people reading posts so I will show you how to add a search function in your app.</p>
<p>The core of the <strong>search</strong> function is that we will create a form. After the user submit that form (pressing search), we will filter our global <strong>state</strong> ListPosts all the posts that have the titles that include the value of the form. After getting a filtered list, we will create another global state called <strong>SearchList</strong> to contain the new list. We must do this because if we filtered directly in the main ListPosts state, it will automatically <strong>remove</strong> your posts whenever you search them.</p>
<p>So first in the Redux store, I will create another global state called SearchList</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initialState = &#123;</span><br><span class="line">  ListPosts:[],</span><br><span class="line">  SearchList:[],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Now we will create a SearchForm component to store our search function.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> SearchForm = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;searchPost&#125; = props</span><br><span class="line">  <span class="keyword">const</span> [value, setValue] = useState(<span class="string">""</span>)</span><br><span class="line">  <span class="keyword">const</span> [fireRedirect, setFireRedirect] = useState(<span class="literal">false</span>)</span><br><span class="line">  <span class="keyword">const</span> dispatch = useDispatch()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// const useQuery = () =&gt; &#123;</span></span><br><span class="line">  <span class="comment">//   return new URLSearchParams(useLocation().search);</span></span><br><span class="line">  <span class="comment">// &#125;;</span></span><br><span class="line">  <span class="comment">// const query = useQuery();</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> onSubmitHandler = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    e.preventDefault()</span><br><span class="line">    setFireRedirect(<span class="literal">true</span>)</span><br><span class="line">    searchPost(value)</span><br><span class="line">    <span class="comment">// dispatch(actionCreators.searchPost(value))</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;form onSubmit=&#123;onSubmitHandler&#125;&gt;</span><br><span class="line">        &lt;input</span><br><span class="line">          type=<span class="string">"text"</span></span><br><span class="line">          value=&#123;value&#125;</span><br><span class="line">          onChange=&#123;(e) =&gt; setValue(e.target.value)&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">        &lt;button type=<span class="string">"submit"</span>&gt;Search&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>form&gt;</span><br><span class="line">    &#123;fireRedirect &amp;&amp; &lt;Redirect to=&#123;`/posts/?name=$&#123;value&#125;`&#125; /&gt;&#125;</span><br><span class="line">    &#123;<span class="comment">/* &lt;button onClick=&#123;() =&gt; dispatch(actionCreators.clearSearchList())&#125;&gt;Refresh&lt;/button&gt; */</span>&#125;</span><br><span class="line"></span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>First, we still handle the forms in the standard way, creating a state that holds the value of the form and whenever the input is changing we will update the <strong>state</strong> with the corresponding value.</p>
<p>We also set a function <strong>searchPost</strong> as a props of this component along with the new <strong>value</strong> that was just updated.</p>
<p>So what does the <strong>fireRedirect</strong> do ?</p>
<p>Well, this will help us redirect our page to the link “…/posts/?name=” similar to when we perform a <strong>query</strong> (search) on Google. For example if I <strong>searched</strong> “hello” on Google, I will be taken to the path “<a href="http://www.google.com/search?q=hello" target="_blank" rel="noopener">www.google.com/search?q=hello</a>”.</p>
<p>So I will do just as usual, dispatch the <strong>action</strong> SEARCH_POST. Here is my action folder:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> searchPost = <span class="function">(<span class="params">value</span>) =&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type:SEARCH_POST,</span><br><span class="line">    value:value <span class="comment">//action payload dc gắn giá trị newPostListSearch</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>In my reducer I will set my newly created global state SearchList as the filtered ListPosts.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> actionTypes.SEARCH_POST:</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="keyword">const</span> newPostListSearch = state.ListPosts.filter(<span class="function">(<span class="params">post</span>) =&gt;</span> post.title.toLowerCase().includes(action.value.toLowerCase()))</span><br><span class="line">        <span class="keyword">return</span>&#123;</span><br><span class="line">          ...state,</span><br><span class="line">          SearchList: newPostListSearch</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>
<p>And so we are done with the <strong>search</strong> function</p>
<h2><span id="conclusion">Conclusion</span></h2>
<p>So we have officially done with our M.E.R.N stack app. If you want to look at the source code you can find it <a href="https://github.com/MRSNOO/PersonalBlog" target="_blank" rel="noopener">Here</a>. It is a basic web and has no styling at all yet :)) so sorry for that.</p>
<p><strong>This is the end of my first super long post, I hope you enjoyed it and learnt something new from it. Hope I can receive more support in the future !!</strong></p>

                

                <hr>
                <!-- Pager -->
                <ul class="pager">
                    
                    
                        <li class="next">
                            <a href="/test/2020/03/26/intro/" data-toggle="tooltip" data-placement="top" title="Post#1 How I started coding ...">Next Post &rarr;</a>
                        </li>
                    
                </ul>

                <!-- duoshuo Share start -->
                

                

                <!-- disqus comment start -->
                
                    <div class="comment">
                        <div id="disqus_thread" class="disqus-thread"></div>
                    </div>
                
                <!-- disqus comment end -->
            </div>
            
            <!-- Tabe of Content -->
            <!-- Table of Contents -->

    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">This is going to be the first technical blog that I write and it is going to be super long but very helpful. Stay tuned !!</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">1.1.</span> <span class="toc-nav-text">What is M.E.R.N ?</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">1.2.</span> <span class="toc-nav-text">What do we need in a blog ?</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">Let’s get to creating our app !!</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">2.1.</span> <span class="toc-nav-text">1. Create a React application</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">2.2.</span> <span class="toc-nav-text">2. Install necessary dependencies</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">Now we start crafting our React application</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">Creating forms for CRUD (Add function)</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">3. Setting up the Redux Store</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.2.1.</span> <span class="toc-nav-text">1. Setting in the index.js file</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.2.2.</span> <span class="toc-nav-text">2. Setting in the action folder</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.2.3.</span> <span class="toc-nav-text">3. Setting the reducer</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.3.</span> <span class="toc-nav-text">Creating a server for the website using Nodejs and Express</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.4.</span> <span class="toc-nav-text">Setting up the database using MongoDB Compass</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.5.</span> <span class="toc-nav-text">Connecting the database to the server</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.6.</span> <span class="toc-nav-text">Structuring MongoDB</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.7.</span> <span class="toc-nav-text">Setting up more routers to call API</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.8.</span> <span class="toc-nav-text">Render our ListPosts (Read function)</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.9.</span> <span class="toc-nav-text">Delete Function</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.10.</span> <span class="toc-nav-text">Update Function</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.11.</span> <span class="toc-nav-text">Additional Functions</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.11.1.</span> <span class="toc-nav-text">Search Form</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">Conclusion</span></a></li></ol>
        
        </div>
      </aside>
    

                
            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/test/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
            </div>
        </div>
    </div>
</article>




<!-- disqus embedded js code start (one page only need to embed once) -->
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = "your-disqus-ID";
    var disqus_identifier = "huynhtuanhuy.github.io/2020/03/27/CreateBlog/";
    var disqus_url = "huynhtuanhuy.github.io/2020/03/27/CreateBlog/";

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<!-- disqus embedded js code start end -->




<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'left',
        //   icon: 'ℬ'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                
                
                

                

                

                
                    <li>
                        <a target="_blank"  href="https://github.com/NhatQuang">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; Nhat Quang 2020 
                    <br>
                    Theme by <a href="http://huangxuan.me">Hux</a> 
                    <span style="display: inline-block; margin: 0 5px;">
                        <i class="fa fa-heart"></i>
                    </span> 
                    re-Ported by <a href="http://beantech.org">BeanTech</a> | 
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="91px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=YenYuHsuan&repo=hexo-theme-beantech&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/test/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/test/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/test/js/hux-blog.min.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("huynhtuanhuy.github.io/test/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->


<script>
    // dynamic User by Hux
    var _gaId = 'UA-XXXXXXXX-X';
    var _gaDomain = 'yoursite';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>




<!-- Baidu Tongji -->






	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>
<img src="huynhtuanhuy.github.io/test/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
